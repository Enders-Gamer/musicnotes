<!-- created by Aaron Dull 2018-2020 -->
<!-- You are a jelly donut and I am
pushing this comment to GitHub with
Atom running on Linux Zorin on my
Dell Optiples-380 on 20201126232519 -->
<html>
  <head>
    <title>music notes</title>
<style>
  * {
    padding: 0;
    margin: 0;
    font-family: monospace;
  }
  table tr td{
    padding: 0;
    text-align:center;
  }
  div.controls {
    position: fixed;
    top: 0;
    background-color: #d9f;
    width: 100%;
  }
  button {
    width: 50px;
    height: 50px;
    border-radius: 3px;
    border: 0px solid black;
    background-color: #6688bb;
  }
  canvas#mnCanvas {
    position: relative;
    top: 320px;
    border: 1px solid black;
    z-index: -1;
  }
  div#notationConsole {
    position: fixed;
    top: 0;
    left: 400;
    background-color: #112240;
    color: #33ffee;
    border-radius: 6px;
    height: 520px;
    width: 500px;
    font-family: helvetica;
    font-size: 12px;
    overflow: scroll;
    word-wrap: break-word;
  }
  div#notationConsole span {
    margin: 0px 4px 0px 4px;
    background-color: #444444;
    border: 1px solid #000000;
  }
  div#listOfNotesDisplay {
    position: fixed;
    top: 530;
    left: 400;
    background-color: #442240;
    color: #33ffee;
    height: 300px;
    width: 300px;
    font-family: helvetica;
    font-size: 12px;
    word-wrap: break-word;
    overflow: scroll;
  }
  .notationConsoleLineNumbers {
    color:#ddddef;
    background-color: #335599;
    font-family: monospace;
    font-size:16px;
  }
</style>
</head>
<body>
<div class="controls">
  <table>
    <tr>
      <td><button onclick="createANote(this.id);" id="c6button">C6</button></td>
      <td><button onclick="createANote(this.id);" id="d6button">D6</button></td>
      <td><button onclick="createANote(this.id);" id="e6button">E6</button></td>
      <td><button onclick="createANote(this.id);" id="f6button">F6</button></td>
      <td><button onclick="createANote(this.id);" id="g6button">G6</button></td>
      <td><button onclick="createANote(this.id);" id="a6button">A6</button></td>
      <td><button onclick="createANote(this.id);" id="b6button">B6</button></td>
    </tr>
    <tr>
      <td><button onclick="createANote(this.id);" id="c5button">C5</button></td>
      <td><button onclick="createANote(this.id);" id="d5button">D5</button></td>
      <td><button onclick="createANote(this.id);" id="e5button">E5</button></td>
      <td><button onclick="createANote(this.id);" id="f5button">F5</button></td>
      <td><button onclick="createANote(this.id);" id="g5button">G5</button></td>
      <td><button onclick="createANote(this.id);" id="a5button">A5</button></td>
      <td><button onclick="createANote(this.id);" id="b5button">B5</button></td>
    </tr>
    <tr>
      <td><button onclick="createANote(this.id);" id="c4button">C4</button></td>
      <td><button onclick="createANote(this.id);" id="d4button">D4</button></td>
      <td><button onclick="createANote(this.id);" id="e4button">E4</button></td>
      <td><button onclick="createANote(this.id);" id="f4button">F4</button></td>
      <td><button onclick="createANote(this.id);" id="g4button">G4</button></td>
      <td><button onclick="createANote(this.id);" id="a4button">A4</button></td>
      <td><button onclick="createANote(this.id);" id="b4button">B4</button></td>
    </tr>
    <tr>
      <td><button onclick="createANote(this.id);" id="c3button">C3</button></td>
      <td><button onclick="createANote(this.id);" id="d3button">D3</button></td>
      <td><button onclick="createANote(this.id);" id="e3button">E3</button></td>
      <td><button onclick="createANote(this.id);" id="f3button">F3</button></td>
      <td><button onclick="createANote(this.id);" id="g3button">G3</button></td>
      <td><button onclick="createANote(this.id);" id="a3button">A3</button></td>
      <td><button onclick="createANote(this.id);" id="b3button">B3</button></td>
    </tr>
    <tr>
      <td><button onclick="drawNoteHead(x,y);x+=10;console.log(i);">draw note head</button></td>
      <td><button onclick="drawStaves(quan,spac,tmar);console.log(i);i=0;console.log(i);stavesHaveBeenDrawn=true;">draw staves</button></td>
      <td><button onclick="startOver();">new</button></td>
      <td><button onclick="drawTrebleCleff(x,y);console.log(i);">treble clef</button></td>
      <td><button onclick="drawSharp(x,y);console.log(i);x+=10;">sharp</button></td>
      <td><button onclick="increaseXten()">x+=10</button></td>
      <td><button onclick="decreaseXten()">x-=10</button></td>
    </tr>
    <tr>
      <td><button onclick="increaseX_5()">x+=5</button></td>
      <td><button onclick="decreaseX_5()">x-=5</button></td>
      <td><button onclick="increaseY_5()">y+=5</button></td>
      <td><button onclick="decreaseY_5()">y-=5</button></td>
      <td><button></button></td>
      <td><button></button></td>
      <td><button></button></td>
    </tr>
  </table>
</div>
<canvas id="mnCanvas"></canvas>
<div id="notationConsole">
  <span>notation console</span>
</div>
<div id="listOfNotesDisplay"></div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="draw_music_symbols.js"></script>
<script>
/*
  $(document).keypress(function(e){
     if (e.which == 87){
         document.body.style.backgroundColor = "black";
     }
  }); */
  //key binding:
    $(document).keypress(function(e){
       createANote(keyMap[e.which]);
    });
  var keyMap = {
    "122": "c3", "120": "d3",  "99": "e3", "118": "f3",  "98": "g3", "110": "a3", "109": "b3",
     "97": "c4", "115": "d4", "100": "e4", "102": "f4", "103": "g4", "104": "a4", "106": "b4",
    "113": "c5", "119": "d5", "101": "e5", "114": "f5", "116": "g5", "121": "a5", "117": "b5",
     "49": "c6",  "50": "d6",  "51": "e6",  "52": "f6",  "53": "g6",  "54": "a6",  "55": "b6",
  }
  var stavesHaveBeenDrawn = false;
  function increaseX_5() {x+=5;}
  function decreaseX_5() {x-=5;}
  function increaseY_5() {y+=5;}
  function decreaseY_5() {y-=5;}
  function increaseXten() {x+=10;}
  function decreaseXten() {x-=10;}
  var ii = 0;
  var y = 50;
  var x = 15;
  let quan = 12;
  let spac = 100;
  let tmar = 50;
  function clearCanvas() {
    ctx.fillStyle = "#fefefe";
    ctx.fillRect(0, 0, c.width, c.height);
  }
  function startOver() {
    clearCanvas();
    x = 15;
    ii = 0;
    listOfNotes = [];
    notationConsoleDotLog("You just deleted everything.");
  }
  var ledgerLineRadius = 8;
  var notationConsole = document.getElementById("notationConsole");
  var listOfNotesDisplay = document.getElementById("listOfNotesDisplay");
  var listOfNotes = [];
  var yValueOfNoteRelativeToMiddleLine;
  var yValuesOfNotesRelativeToMiddleLine = {
    "b6": -70, "a6": -65, "g6": -60, "f6": -55, "e6": -50, "d6": -45, "c6": -40,
    "b5": -35, "a5": -30, "g5": -25, "f5": -20, "e5": -15, "d5": -10, "c5":  -5,
    "b4":   0, "a4":   5, "g4":  10, "f4":  15, "e4":  20, "d4":  25, "c4":  30,
    "b3":  35, "a3":  40, "g3":  45, "f3":  50, "e3":  55, "d3":  60, "c3":  65
  }
  var notationConsoleEntryNumber = 0;
  function notationConsoleDotLog(notationConsoleLogEntry) {
    notationConsoleEntryNumber ++;
    notationConsole.innerHTML += ("<br><span class='notationConsoleLineNumbers'>" + notationConsoleEntryNumber + ":</span>" + notationConsoleLogEntry);
    notationConsole.scrollTop = notationConsole.scrollHeight;
  }
  function listOfNotesDisplayUpdate(listOfNotes) {
    listOfNotesDisplay.innerHTML = ("notes are: " + listOfNotes + "<br>You have " + listOfNotes.length + " notes.");
    if (listOfNotes.length > 50) {
      listOfNotesDisplay.innerHTML += ("<br>You have too many notes.")
    }
  }
  function createANote(idOfButton) {
    clearCanvas();
    let noteName = idOfButton.slice(0,2);
    listOfNotes.push(noteName);
    notationConsoleDotLog('new note: ' + noteName);
    notationConsoleDotLog(listOfNotes);
    if (stavesHaveBeenDrawn == true) {
      drawStaves(quan, spac, tmar);
    }
    x=15;
    for (iii=0; iii<listOfNotes.length; iii++) {
      yValueOfNoteRelativeToMiddleLine = yValuesOfNotesRelativeToMiddleLine[listOfNotes[iii]];
      y = yValueOfNoteRelativeToMiddleLine+tmar+20+spac*ii;
      drawNoteHead(x, y);
      drawLedgerLines(y);
      resetX();
    }
    listOfNotesDisplayUpdate(yValueOfNoteRelativeToMiddleLine);
  }
  function drawLedgerLines(yy) {
    let middleStaffLineY = tmar+spac*ii+20;
    if (yy<-20 && yy%2===0) {
        let verticalDistanceOfNoteHeadFromStaff = middleStaffLineY-y-20;
        for (iiii=0; iiii<verticalDistanceOfNoteHeadFromStaff/10; iiii++) {
            drawLine(x-ledgerLineRadius, y+10*iiii+spac*ii+tmar+20, x+ledgerLineRadius, yy+10*iiii+spac*ii+tmar+20);
        }
    } else if (yy<-20 && yy%2===1) {
        let verticalDistanceOfNoteHeadFromStaff = middleStaffLineY-y-20;
        for (iiii=0; iiii<verticalDistanceOfNoteHeadFromStaff/10; iiii++) {
            drawLine(x-ledgerLineRadius, yy+10*iiii+5+spac*ii+tmar+20, x-ledgerLineRadius, yy+10*iiii+5+spac*ii+tmar+20);
        }
    } else if (yy>20 && yy%2===0) {
        let verticalDistanceOfNoteHeadFromStaff = y-middleStaffLineY-20;
        for (iiii=0; iiii<verticalDistanceOfNoteHeadFromStaff/10; iiii++) {
            drawLine(x-ledgerLineRadius, yy-10*iiii+spac*ii+tmar+20, x+ledgerLineRadius, yy-10*iiii+spac*ii+tmar+20);
        }
    } else if (yy>20 && yy%2===1) {
        let verticalDistanceOfNoteHeadFromStaff = y-middleStaffLineY-20;
        for (iiii=0; iiii<verticalDistanceOfNoteHeadFromStaff/10; iiii++) {
            drawLine(x-ledgerLineRadius, yy-10*iiii-5+spac*ii+tmar+20, x+ledgerLineRadius, yy-10*iiii-5+spac*ii+tmar+20);
        }
    }
  }
  // (middleStaffLineY - y - 20) / 10
  function resetX() {
    notationConsoleDotLog('x = ' + x);
    x += 10;
    if (x>390) {
      x = 15;
      ii += 1;
      notationConsoleDotLog('ii += 1');
      notationConsoleDotLog('x = ' + x);
    }
  }
</script>
</body>
</html>
<!--
clicking on any clef gives a dropdown menu with other clef options.
shift-clicking an option allows user to drag to the point where clef reverts to what it was before.
 -->
